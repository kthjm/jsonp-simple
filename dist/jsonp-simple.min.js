!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.jsonpSimple=n()}(this,function(){"use strict";var e=function e(){var n="jsonp_callback_"+Math.floor(1e4*Math.random());return window[n]?e():n},n=function(e){return{timeout:e.timeout||!1,onerror:e.onerror||!1}},t=function(e){return document.head&&document.head.removeChild(e)},o=function(e){delete window[e]};return function(r){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;if("string"!=typeof r)throw new TypeError('jsonp argument "src" must be "string"');return new Promise(function(i,u){var a=e(),f=function(e){var n=document.createElement("script");return n.src=e,n.async=!0,n}(function(e,n){return e.includes("?")?e+"&callback="+n:e+"?callback="+n}(r,a)),d=function(e){function n(){t(r),o(c)}var r=e.script,c=e.globalName,i=e.resolve,u=e.reject;return{succeed:function(e){i(e),n()},fail:function(e){u(e),n()}}}({resolve:i,reject:u,globalName:a,script:f}),l=d.succeed,s=d.fail,m=setTimeout(function(){return s(n({timeout:!0}))},c);f.onerror=function(e){clearTimeout(m),s(n({onerror:e}))},window[a]=function(e){clearTimeout(m),l(e)},function(e){document.head&&document.head.appendChild(e)}(f)})}});
